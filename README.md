# Questions-API

### Introduction

This API implements a CRUD of questions

### Architecture

This application implement an event-based architecture. Principles of the 12 factors were used to build.

![This is a alt text.](https://user-images.githubusercontent.com/76056225/149680095-1e27b047-32f8-4288-b7ac-b06472d4727f.png "This is a sample image.")

### Dependent services

- Kafka
- Sql Server
- Mongo
- Seq

### Getting Started

1. Go to the docker-compose file and change the variable KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS and KAFKA_CLUSTERS_0_ZOOKEEPER and put the ip of your machine


2. Run docker-compose
```
docker-compose up -d
```

3. Install dotnet-ef
```
dotnet tool install --global dotnet-ef
```

4. Go to the /src/Services/Question.API/ folder
change the ip of the connectionString key of the appsettings file to the ip of your machine and run the following command
```
dotnet ef database update
```
This command runs the migration on the database.
If all goes well you can insert the sql script in your console which is auto generated by EF

5. build e execute a api ou o worker
dotnet build
dotnet question.api.dll or worker.analytics.dll

### Services

- kafka-ui  localhost:8080
- [Seq](https://datalust.co/seq) : localhost:5341


#### backlog:
Implement consumer of the following events in worker
- votedChoice
- updatedQuestion
